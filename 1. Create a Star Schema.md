# 1. Create a Star Schema

> Design and implement a star schema for a retail business scenario including fact and dimension tables. Populate it with sample data.

---

## Dimension Tables

### Product Dimension Table

```sql
CREATE TABLE Product_Dim (
    product_id INT PRIMARY KEY,
    product_name VARCHAR(50),
    category VARCHAR(30),
    brand VARCHAR(30),
    price DECIMAL(10,2)
);
```

### Customer Dimension Table

```sql
CREATE TABLE Customer_Dim (
    customer_id INT PRIMARY KEY,
    customer_name VARCHAR(50),
    gender CHAR(1),
    age INT,
    city VARCHAR(50)
);
```

### Store Dimension Table

```sql
CREATE TABLE Store_Dim (
    store_id INT PRIMARY KEY,
    store_name VARCHAR(50),
    location VARCHAR(50),
    manager_name VARCHAR(50)
);
```

### Time Dimension Table

```sql
CREATE TABLE Time_Dim (
    time_id INT PRIMARY KEY,
    date DATE,
    month VARCHAR(15),
    quarter VARCHAR(10),
    year INT
);
```

---

## Fact Table

### Sales Fact Table

```sql
CREATE TABLE Sales_Fact (
    sale_id INT PRIMARY KEY,
    product_id INT,
    customer_id INT,
    store_id INT,
    time_id INT,
    quantity_sold INT,
    total_amount DECIMAL(10,2),
    FOREIGN KEY (product_id) REFERENCES Product_Dim(product_id),
    FOREIGN KEY (customer_id) REFERENCES Customer_Dim(customer_id),
    FOREIGN KEY (store_id) REFERENCES Store_Dim(store_id),
    FOREIGN KEY (time_id) REFERENCES Time_Dim(time_id)
);
```

---

## Sample Data Insertion

### Insert Sample Data into Product Dimension

```sql
INSERT INTO Product_Dim VALUES
(1, 'Laptop', 'Electronics', 'HP', 50000),
(2, 'Smartphone', 'Electronics', 'Samsung', 25000),
(3, 'Shampoo', 'Personal Care', 'Dove', 250);
```

### Insert Sample Data into Customer Dimension

```sql
INSERT INTO Customer_Dim VALUES
(101, 'John Doe', 'M', 32, 'Chennai'),
(102, 'Jane Smith', 'F', 27, 'Bangalore'),
(103, 'Ali Khan', 'M', 45, 'Mumbai');
```

### Insert Sample Data into Store Dimension

```sql
INSERT INTO Store_Dim VALUES
(1, 'BigMart Chennai', 'Chennai', 'Mr. Raj'),
(2, 'BigMart Mumbai', 'Mumbai', 'Mrs. Meera');
```

### Insert Sample Data into Time Dimension

```sql
INSERT INTO Time_Dim VALUES
(1001, '2024-12-01', 'December', 'Q4', 2024),
(1002, '2025-01-15', 'January', 'Q1', 2025);
```

### Insert Sample Data into Sales Fact

```sql
INSERT INTO Sales_Fact VALUES
(1, 1, 101, 1, 1001, 1, 50000),
(2, 2, 102, 2, 1002, 2, 50000),
(3, 3, 103, 1, 1002, 4, 1000);
```

---

## Example Queries

### Query: Total Revenue by Product

```sql
SELECT p.product_name, SUM(s.total_amount) AS revenue
FROM Sales_Fact s
JOIN Product_Dim p ON s.product_id = p.product_id
GROUP BY p.product_name;
```

### Query: Monthly Revenue

```sql
SELECT t.month, SUM(s.total_amount) AS monthly_revenue
FROM Sales_Fact s
JOIN Time_Dim t ON s.time_id = t.time_id
GROUP BY t.month;
```
